import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.DefaultComboBoxModel;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.sql.*;
import java.awt.Color;

public class visitor_request extends JFrame {

	private JPanel contentPane;
	private JTextField txtName;
	private JTextField txtIC;
	private JTextField txtPhone;
	private JTextField txtPurpose;

	
	
	/**
	 * Launch the application.
	 */
	public static void main(String[] args) {
		EventQueue.invokeLater(new Runnable() {
			public void run() {
				try {
					visitor_request frame = new visitor_request();
					frame.setVisible(true);
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
		});
	}

	/**
	 * Create the frame.
	 * @throws Exception 
	 */
	public visitor_request() throws Exception {
		Connection conn = DbConnection.database();
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		setBounds(100, 100, 579, 253);
		contentPane = new JPanel();
		contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));

		setContentPane(contentPane);
		contentPane.setLayout(null);
		JComboBox comboHour = new JComboBox();
		comboHour.setModel(new DefaultComboBoxModel(new String[] {"8", "9", "10", "11", "12", "13", "14", "15", "16", "17"}));
		comboHour.setBounds(362, 104, 59, 22);
		contentPane.add(comboHour);
		
		JComboBox comboMinute = new JComboBox();
		comboMinute.setModel(new DefaultComboBoxModel(new String[] {"00", "05", "10", "15", "20", "25", "30", "35", "40", "45", "50", "55"}));
		comboMinute.setBounds(445, 104, 59, 22);
		contentPane.add(comboMinute);
		
		JComboBox comboMonth = new JComboBox();
		comboMonth.setModel(new DefaultComboBoxModel(new String[] {"JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"}));
		comboMonth.setBounds(362, 53, 66, 22);
		contentPane.add(comboMonth);
		
		JComboBox comboDate = new JComboBox();
		comboDate.setModel(new DefaultComboBoxModel(new String[] {"1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31"}));
		comboDate.setBounds(427, 53, 46, 22);
		contentPane.add(comboDate);
		
		JLabel lblTime = new JLabel("Time of Visit");
		lblTime.setBounds(276, 108, 76, 14);
		contentPane.add(lblTime);
		
		JLabel lblDate = new JLabel("Date of Visit");
		lblDate.setBounds(276, 57, 76, 14);
		contentPane.add(lblDate);
		
		JComboBox comboYear = new JComboBox();
		comboYear.setModel(new DefaultComboBoxModel(new String[] {"2022", "2023", "2024"}));
		comboYear.setBounds(474, 53, 66, 22);
		contentPane.add(comboYear);
		JButton btnSubmit = new JButton("Submit");
		btnSubmit.setBackground(new Color(60, 179, 113));
		btnSubmit.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				String name = txtName.getText();
				String ic = txtIC.getText();
				String phone = txtPhone.getText();
				String purpose = txtPurpose.getText();
				String time = comboHour.getSelectedItem().toString()+comboMinute.getSelectedItem().toString();
				String date = comboDate.getSelectedItem().toString()+comboMonth.getSelectedItem().toString()+comboYear.getSelectedItem().toString();
				System.out.println(name+ic+phone+purpose+time+date);
				try {
					
					String QUERY = "insert into user_request (name,ic,phone,purpose,tov,dov) values(?, ?, ?, ?, ?, ?)";
					PreparedStatement preparedStmt = conn.prepareStatement(QUERY);
					preparedStmt.setString(1, name);
					preparedStmt.setString(2, ic);
					preparedStmt.setString(3, phone);
					preparedStmt.setString(4, purpose);
					preparedStmt.setString(5, time);
					preparedStmt.setString(6, date);
					preparedStmt.execute();
				} catch (SQLException e1) {
					// TODO Auto-generated catch block
					e1.printStackTrace();
				}
				
				
			}
		});
		btnSubmit.setBounds(451, 180, 89, 23);
		contentPane.add(btnSubmit);
		
		JLabel lblName = new JLabel("Name");
		lblName.setBounds(27, 39, 46, 14);
		contentPane.add(lblName);
		
		txtName = new JTextField();
		txtName.setBounds(121, 36, 124, 20);
		contentPane.add(txtName);
		txtName.setColumns(10);
		
		JLabel lblIC = new JLabel("IC No.");
		lblIC.setBounds(27, 70, 86, 14);
		contentPane.add(lblIC);
		
		txtIC = new JTextField();
		txtIC.setBounds(121, 67, 124, 20);
		contentPane.add(txtIC);
		txtIC.setColumns(10);
		
		JLabel lblPhone = new JLabel("Phone No.");
		lblPhone.setBounds(27, 104, 84, 14);
		contentPane.add(lblPhone);
		
		txtPhone = new JTextField();
		txtPhone.setBounds(121, 101, 124, 20);
		contentPane.add(txtPhone);
		txtPhone.setColumns(10);
		
		JLabel lblPurpose = new JLabel("Purpose of Visit");
		lblPurpose.setBounds(27, 132, 111, 14);
		contentPane.add(lblPurpose);
		
		txtPurpose = new JTextField();
		txtPurpose.setBounds(121, 129, 124, 64);
		contentPane.add(txtPurpose);
		txtPurpose.setColumns(10);
		
		
		JButton btnCancel = new JButton("Cancel");
		btnCancel.setBackground(new Color(204, 51, 51));
		btnCancel.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
			}
		});
		btnCancel.addMouseListener(new MouseAdapter() {
			@Override
			public void mousePressed(MouseEvent e) {
				dispose();
				visitor vs = null;
				try {
					vs = new visitor();
				} catch (Exception e1) {
					// TODO Auto-generated catch block
					e1.printStackTrace();
				}
				vs.setVisible(true);
			}
		});
		btnCancel.setBounds(352, 180, 89, 23);
		contentPane.add(btnCancel);
		
		JLabel lblNewLabel_5 = new JLabel("Request a Ticket");
		lblNewLabel_5.setBounds(190, 11, 122, 14);
		contentPane.add(lblNewLabel_5);
		
		
	}
}
